# AI-Driven Warehouse Forecasting & Reordering System

## 1. Project Overview
This project implements a hybrid forecasting system for warehouse management. It combines deterministic statistical models (SMA, Linear Regression) with a Large Language Model (Mistral AI) to provide reasoned, risk-aware inventory decisions.

## 2. Methodology

### Phase 1: Data Processing
- **Aggregation**: Historical demand is aggregated to a daily granularity per SKU.
- **Stock Calculation**: Current inventory is derived from historical transactions using the formula:
  $$Stock = \sum Receipts - \sum (Deliveries + Picking + Transfers)$$
- **Cleaning**: Outliers and template/dummy rows are filtered to ensure data integrity.

### Phase 2: Statistical Engine (Top-Performing Trio)
We use three high-accuracy model signals to feed the AI Decision Layer:
1. **Simple Exponential Smoothing (SES)**: Captures recent demand sensitivity (Alpha: 0.25–0.40).
2. **Linear Regression (OLS)**: Detects long-term trends and growth trajectories.
3. **Year-over-Year (YoY) Seasonality**: Captures annual patterns by analyzing the same day/month in previous years.
4. **Safety Stock**: Computed as $Z \times \sigma$ where Z is dynamic based on demand classification (Fast vs Slow mover).

### Phase 3: AI Decision Layer (The "Improved" Model)
Instead of a simple mathematical average, we use **Mistral AI** to act as a digital warehouse supervisor. 
- **Input**: Statistical features (SES, REG, YoY, Trend Strength, Volatility).
- **Calibrated Base**: A deterministic hybrid blend (Reg-dominant) multiplied by a **1.27x calibration factor** to achieve near-zero bias.
- **Output**: A final forecast adjusted for seasonal context and a plan-text justification.

### Phase 4: Order Generation & Reordering (Requirement 8.1)
- **Stock Awareness**: Real-time stock calculation from transaction logs ($Receipts - Deliveries - Picking$).
- **One Day in Advance**: Dedicated trigger mechanism to predict "Tomorrow's" preparation needs today.
- **Preparation Quantity**: $Prep = \max(0, Forecast - CurrentStock)$.

## 3. Picking Optimization Service (Requirement 8.3)

### 3.1 Advanced Pathfinding
We use the **A* Search Algorithm** to compute the true shortest path in the warehouse grid. Unlike Euclidean distance, our A* considers:
- **Obstacles**: Pillars, walls, and rack bodies are impassable.
- **Walkable Floors**: Movement is restricted to precomputed "aisles".
- **Sequence Optimization**: Uses a "Greedy Nearest-Neighbor" loop to minimize total travel distance between multiple pick locations.

### 3.2 operational efficiency
- **Multi-Chariot Logic**: Tasks are distributed among multiple chariots based on proximity to their starting landmarks.
- **Expedition Priority**: After the final pick, the AI calculates the shortest route back to the nearest **Expedition Zone** to minimize the total delivery preparation cycle time.
- **High-Frequency Slotting**: The system integrates with a storage logic that places **High-Frequency SKUs** closer to the expedition zones, resulting in shorter picking routes for the most demanded items.

### 3.3 Picking KPIs
For every generated picking order, the AI calculates:
- **Total Distance (m)**: Total meters traveled.
- **Estimated Travel Time**: Based on a constant walking speed (1.0 m/s).
- **Turning Count**: Number of direction changes (turns slow down chariots).
- **Total Duration**: Travel time + Picking effort (15s per item).

## 4. Final Assessment (Summary)
| Requirement | Status | Verification Tool |
| :--- | :--- | :--- |
| **8.1 Forecasting** | ✅ COMPLETED | `forecasting_service.py` |
| **8.3 Picking** | ✅ COMPLETED | `picking_optimization.py` |
| **Shortest Routes** | ✅ COMPLETED | A* Pathfinding validated in `test_step9.py`. |
| **Travel Time** | ✅ COMPLETED | KPI calculation and Expedition return. |
| **Frequency Priority** | ✅ COMPLETED | Closeness-to-Expedition heuristic in Slotting. |

*Generated by GitHub Copilot*
